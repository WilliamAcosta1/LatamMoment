const Discord = require('discord.js');
const Canvas = require("canvas");
const botConfig = require("@config/bot.js");
const { getFooter } = require("@modules/utils/data.js");
const emoji = require('@config/emojis.js');
require("@modules/localization.js");

module.exports = {
    name: "ex",
    description: "",
    aliases: [],
    ussage: null,
    hidden: true,
    admin: true,
    nsfw: false,
    async execute(client, message, args) {

        const canvas = Canvas.createCanvas(1018, 468)
        const ctx = canvas.getContext("2d")

        const background = await Canvas.loadImage('https://i.imgur.com/PFAXleW.png')
        ctx.drawImage(background, 0, 0, canvas.width, canvas.height)

         ctx.fillStyle = "#ffffff"
         ctx.font = "100px serif"
         ctx.textAlign = 'center'
 
         ctx.fillText("Bienvenido", 700, 150)
 
         ctx.fillStyle = "#ffffff"
         ctx.font = "80px serif" //sans-serif
         ctx.textAlign = 'center'
 
         ctx.fillText(`WilliamAcosta`, 700, 280)
 
         ctx.fillStyle = "#ffffff"
         ctx.font = "50px sans-serif"
         ctx.textAlign = 'center'
 
         ctx.fillText(`Eres el: 5876`, 190, 420)


        const x = 20, y = 10, size = 350

        ctx.save()
        ctx.beginPath()
        ctx.arc(x+size/2, y+size/2, size/2, 0, Math.PI * 2, true)
        ctx.closePath()
        ctx.clip()

        const avatar = await Canvas.loadImage(message.author.displayAvatarURL({ dynamic: true, size: 1024, format: "png" }))
        ctx.drawImage(avatar, x, y, size, size)

        const attachment = new Discord.MessageAttachment(canvas.toBuffer(), "welcome.png")

        return message.reply({ files: [attachment], allowedMentions: { repliedUser: false } })
    }
}